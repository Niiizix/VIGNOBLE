<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - Marlowe Vineyard Intranet</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Styles sp√©cifiques pour la gestion des utilisateurs */
        .users-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .users-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .users-table th {
            background: #8B5A9F;
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .users-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            color: #1a1a1a;
        }

        .users-table tr:last-child td {
            border-bottom: none;
        }

        .users-table tr:hover {
            background: #f8f9fa;
        }

        .grade-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .grade-employe {
            background: #e3f2fd;
            color: #1976d2;
        }

        .grade-manager {
            background: #fff3e0;
            color: #f57c00;
        }

        .grade-cfo {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .grade-ceo {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #c62828;
        }

        .user-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.3rem 0.6rem;
            font-size: 0.8rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: #17a2b8;
            color: white;
        }

        .btn-edit:hover {
            background: #138496;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-online {
            color: #28a745;
        }

        .status-offline {
            color: #6c757d;
        }

        .last-login {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .user-modal .modal-content {
            max-width: 900px;
            width: 90%;
        }

        .user-form {
            display: grid;
            gap: 1.5rem;
            padding: 2rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .user-modal .modal-content {
                max-width: 95%;
                margin: 1rem;
            }
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .permission-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .search-user {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 0.8rem;
            margin-bottom: 1rem;
            width: 100%;
        }

        .search-user:focus {
            border-color: #8B5A9F;
            outline: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <a href="../index.html" class="logo">
                <i class="fas fa-shield-alt"></i>
                Marlowe Intranet
            </a>
            <ul class="nav-menu">
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="inventaire.html">Inventaire</a></li>
                <li><a href="#commandes">Commandes</a></li>
                <li><a href="documents.html">Documents</a></li>
                <li><a href="configuration.html" class="active">Configuration</a></li>
                <li><a href="#" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> D√©connexion
                </a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero hero-intranet">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        
        <div class="hero-content">
            <h1>Configuration Syst√®me</h1>
            <p class="subtitle">Param√®tres de l'intranet</p>
            <p>Configurez les param√®tres globaux et g√©rez les utilisateurs de votre intranet.</p>
        </div>
    </section>

    <!-- Configuration Sections -->
    <section class="config-section">
        <div class="config-container">
            
            <!-- Gestion des Utilisateurs -->
            <div class="config-category">
                <div class="config-header">
                    <h2><i class="fas fa-users"></i> Gestion des Utilisateurs</h2>
                    <p>G√©rez les comptes utilisateurs et leurs permissions d'acc√®s</p>
                </div>
                
                <div class="config-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <input type="text" id="searchUsers" class="search-user" placeholder="üîç Rechercher un utilisateur..." style="flex: 1; min-width: 250px;">
                        <button class="cta-button btn-success" id="addUserBtn">
                            <i class="fas fa-user-plus"></i> Ajouter Utilisateur
                        </button>
                    </div>

                    <div class="users-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nom d'utilisateur</th>
                                    <th>Nom complet</th>
                                    <th>T√©l√©phone</th>
                                    <th>Grade</th>
                                    <th>Statut</th>
                                    <th>Derni√®re connexion</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr>
                                    <td>
                                        <strong>admin</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Administrateur principal</div>
                                    </td>
                                    <td>Christopher Marlowe</td>
                                    <td>+1 (555) 001-0001</td>
                                    <td><span class="grade-badge grade-ceo">CEO</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-online"></i>
                                            <span>En ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Maintenant</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('admin')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>manager</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Gestionnaire op√©rationnel</div>
                                    </td>
                                    <td>Alexandre Dubois</td>
                                    <td>+1 (555) 002-0123</td>
                                    <td><span class="grade-badge grade-manager">Manager</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-offline"></i>
                                            <span>Hors ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Il y a 2h</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('manager')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-small btn-delete" onclick="deleteUser('manager')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>marlowe</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Responsable production</div>
                                    </td>
                                    <td>Elena Marlowe</td>
                                    <td>+1 (555) 003-0456</td>
                                    <td><span class="grade-badge grade-cfo">CFO</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-online"></i>
                                            <span>En ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Il y a 15min</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('marlowe')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-small btn-delete" onclick="deleteUser('marlowe')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>vincent</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Responsable ventes</div>
                                    </td>
                                    <td>Vincent Leclerc</td>
                                    <td>+1 (555) 004-0789</td>
                                    <td><span class="grade-badge grade-manager">Manager</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-offline"></i>
                                            <span>Hors ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Hier 18h30</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('vincent')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-small btn-delete" onclick="deleteUser('vincent')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>sophie</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Assistante administrative</div>
                                    </td>
                                    <td>Sophie Martin</td>
                                    <td>+1 (555) 005-0234</td>
                                    <td><span class="grade-badge grade-employe">Employ√©</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-online"></i>
                                            <span>En ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Il y a 5min</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('sophie')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-small btn-delete" onclick="deleteUser('sophie')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>lucas</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">Technicien cave</div>
                                    </td>
                                    <td>Lucas Bernard</td>
                                    <td>+1 (555) 006-0567</td>
                                    <td><span class="grade-badge grade-employe">Employ√©</span></td>
                                    <td>
                                        <div class="user-status">
                                            <i class="fas fa-circle status-offline"></i>
                                            <span>Hors ligne</span>
                                        </div>
                                    </td>
                                    <td class="last-login">Il y a 3 jours</td>
                                    <td>
                                        <div class="user-actions">
                                            <button class="btn-small btn-edit" onclick="editUser('lucas')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn-small btn-delete" onclick="deleteUser('lucas')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="config-actions">
                        <button type="button" class="cta-button btn-info" id="exportUsers">
                            <i class="fas fa-download"></i> Exporter Liste
                        </button>
                        <button type="button" class="cta-button btn-warning" id="resetPasswords">
                            <i class="fas fa-key"></i> R√©initialiser Mots de Passe
                        </button>
                    </div>
                </div>
            </div>

            <!-- Seuils de Stock -->
            <div class="config-category">
                <div class="config-header">
                    <h2><i class="fas fa-chart-bar"></i> Seuils de Stock</h2>
                    <p>Configurez les niveaux de stock qui d√©terminent les alertes dans l'inventaire</p>
                </div>
                
                <div class="config-content">
                    <div class="config-grid">
                        <!-- Mati√®res Premi√®res -->
                        <div class="config-item">
                            <h3><i class="fas fa-seedling"></i> Mati√®res Premi√®res</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">
                                        <span class="status-indicator status-critical"></span>
                                        Stock Critique (en-dessous)
                                    </label>
                                    <div class="input-group">
                                        <input type="number" id="critical-matieres" class="form-input" value="50" min="0">
                                        <span class="input-suffix">unit√©s</span>
                                    </div>
                                </div>
                                
                                <div class="threshold-item">
                                    <label class="form-label">
                                        <span class="status-indicator status-warning"></span>
                                        Stock Faible (entre critique et faible)
                                    </label>
                                    <div class="input-group">
                                        <input type="number" id="warning-matieres" class="form-input" value="100" min="0">
                                        <span class="input-suffix">unit√©s</span>
                                    </div>
                                </div>
                                
                                <div class="threshold-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Au-dessus de 100 unit√©s = <strong>Bon Stock</strong></span>
                                </div>
                            </div>
                        </div>

                        <!-- Bouteilles -->
                        <div class="config-item">
                            <h3><i class="fas fa-wine-bottle"></i> Bouteilles Finies</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">
                                        <span class="status-indicator status-critical"></span>
                                        Stock Critique (en-dessous)
                                    </label>
                                    <div class="input-group">
                                        <input type="number" id="critical-bouteilles" class="form-input" value="30" min="0">
                                        <span class="input-suffix">bouteilles</span>
                                    </div>
                                </div>
                                
                                <div class="threshold-item">
                                    <label class="form-label">
                                        <span class="status-indicator status-warning"></span>
                                        Stock Faible (entre critique et faible)
                                    </label>
                                    <div class="input-group">
                                        <input type="number" id="warning-bouteilles" class="form-input" value="75" min="0">
                                        <span class="input-suffix">bouteilles</span>
                                    </div>
                                </div>
                                
                                <div class="threshold-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Au-dessus de 75 bouteilles = <strong>Bon Stock</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button type="button" class="cta-button btn-secondary" id="resetThresholds">
                            <i class="fas fa-undo"></i> R√©initialiser
                        </button>
                        <button type="button" class="cta-button btn-success" id="saveThresholds">
                            <i class="fas fa-save"></i> Sauvegarder
                        </button>
                    </div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="config-category">
                <div class="config-header">
                    <h2><i class="fas fa-bell"></i> Notifications</h2>
                    <p>Param√®tres des notifications et alertes syst√®me</p>
                </div>
                
                <div class="config-content">
                    <div class="config-grid">
                        <div class="config-item">
                            <h3><i class="fas fa-clock"></i> Dur√©e d'affichage</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">Dur√©e par d√©faut des notifications</label>
                                    <div class="input-group">
                                        <input type="number" id="notification-duration" class="form-input" value="4" min="1" max="10">
                                        <span class="input-suffix">secondes</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="config-item">
                            <h3><i class="fas fa-volume-up"></i> Alertes sonores</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">
                                        <input type="checkbox" id="sound-notifications" checked>
                                        Activer les alertes sonores
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button type="button" class="cta-button btn-secondary" id="resetNotifications">
                            <i class="fas fa-undo"></i> R√©initialiser
                        </button>
                        <button type="button" class="cta-button btn-success" id="saveNotifications">
                            <i class="fas fa-save"></i> Sauvegarder
                        </button>
                    </div>
                </div>
            </div>

            <!-- Syst√®me -->
            <div class="config-category">
                <div class="config-header">
                    <h2><i class="fas fa-cogs"></i> Syst√®me</h2>
                    <p>Param√®tres g√©n√©raux du syst√®me</p>
                </div>
                
                <div class="config-content">
                    <div class="config-grid">
                        <div class="config-item">
                            <h3><i class="fas fa-users"></i> Sessions utilisateurs</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">Dur√©e de session (inactivit√©)</label>
                                    <div class="input-group">
                                        <input type="number" id="session-timeout" class="form-input" value="60" min="15" max="480">
                                        <span class="input-suffix">minutes</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="config-item">
                            <h3><i class="fas fa-palette"></i> Th√®me</h3>
                            <div class="threshold-config">
                                <div class="threshold-item">
                                    <label class="form-label">Mode d'affichage</label>
                                    <select class="form-select" id="theme-mode">
                                        <option value="light">Clair</option>
                                        <option value="dark">Sombre</option>
                                        <option value="auto">Automatique</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-actions">
                        <button type="button" class="cta-button btn-secondary" id="resetSystem">
                            <i class="fas fa-undo"></i> R√©initialiser
                        </button>
                        <button type="button" class="cta-button btn-success" id="saveSystem">
                            <i class="fas fa-save"></i> Sauvegarder
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal pour utilisateur -->
    <div id="userModal" class="modal user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Modifier Utilisateur</h3>
                <span class="modal-close" id="closeUserModal">&times;</span>
            </div>
            <form id="userForm" class="user-form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Nom d'utilisateur *</label>
                        <input type="text" id="user-username" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nom complet *</label>
                        <input type="text" id="user-fullname" class="form-input" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">T√©l√©phone *</label>
                        <input type="tel" id="user-phone" class="form-input" required placeholder="+1 (555) 000-0000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Grade *</label>
                        <select id="user-grade" class="form-select" required>
                            <option value="employe">Employ√©</option>
                            <option value="manager">Manager</option>
                            <option value="cfo">CFO</option>
                            <option value="ceo">CEO</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Code d'acc√®s</label>
                        <input type="password" id="user-password" class="form-input" placeholder="Laisser vide pour ne pas changer">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirmer le code</label>
                        <input type="password" id="user-password-confirm" class="form-input" placeholder="Confirmer le code d'acc√®s">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Description / R√¥le *</label>
                    <input type="text" id="user-description" class="form-input" required placeholder="ex: Responsable production">
                </div>

                <div class="form-group">
                    <label class="form-label">Adresse compl√®te</label>
                    <textarea id="user-address" class="form-textarea" rows="3" placeholder="Adresse, code postal, ville, pays"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Date d'embauche</label>
                        <input type="date" id="user-hire-date" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">D√©partement</label>
                        <select id="user-department" class="form-select">
                            <option value="">S√©lectionner un d√©partement</option>
                            <option value="direction">Direction</option>
                            <option value="production">Production</option>
                            <option value="ventes">Ventes & Marketing</option>
                            <option value="administration">Administration</option>
                            <option value="technique">Technique</option>
                            <option value="qualite">Qualit√©</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Salaire (optionnel)</label>
                        <input type="number" id="user-salary" class="form-input" placeholder="Salaire annuel en $">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Manager direct</label>
                        <select id="user-manager" class="form-select">
                            <option value="">Aucun manager</option>
                            <option value="admin">Christopher Marlowe (CEO)</option>
                            <option value="marlowe">Elena Marlowe (CFO)</option>
                            <option value="manager">Alexandre Dubois (Manager)</option>
                            <option value="vincent">Vincent Leclerc (Manager)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Permissions d'acc√®s</label>
                    <div class="permissions-grid">
                        <div class="permission-item">
                            <input type="checkbox" id="perm-dashboard" checked>
                            <label for="perm-dashboard">üìä Dashboard</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-inventory">
                            <label for="perm-inventory">üì¶ Inventaire</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-documents">
                            <label for="perm-documents">üìÑ Documents</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-config">
                            <label for="perm-config">‚öôÔ∏è Configuration</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-reports">
                            <label for="perm-reports">üìà Rapports</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-users">
                            <label for="perm-users">üë• Gestion utilisateurs</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Notes additionnelles</label>
                    <textarea id="user-notes" class="form-textarea" rows="3" placeholder="Informations compl√©mentaires, certifications, comp√©tences sp√©ciales..."></textarea>
                </div>

                <div class="config-actions">
                    <button type="button" class="cta-button btn-secondary" id="cancelUser">Annuler</button>
                    <button type="submit" class="cta-button btn-success" id="saveUser">
                        <i class="fas fa-save"></i> Sauvegarder
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 Marlowe Vineyard - Intranet Priv√© | Acc√®s Restreint</p>
    </footer>

    <script src="../script.js"></script>
    <script>
        // Configuration globale avec utilisateurs
        const configData = window.globalConfig || {
            thresholds: {
                matieres: { critical: 50, warning: 100 },
                bouteilles: { critical: 30, warning: 75 }
            },
            notifications: { duration: 4, soundEnabled: true },
            system: { sessionTimeout: 60, theme: 'light' }
        };

        // Base de donn√©es des utilisateurs
        const usersDatabase = {
            'admin': {
                fullname: 'Christopher Marlowe',
                phone: '+1 (555) 001-0001',
                grade: 'ceo',
                description: 'Administrateur principal',
                password: 'MW2025',
                status: 'online',
                lastLogin: 'Maintenant',
                permissions: ['dashboard', 'inventory', 'documents', 'config', 'reports', 'users'],
                address: '1247 Vinewood Hills Drive, Los Santos, CA 90210',
                hireDate: '2020-01-15',
                department: 'direction',
                salary: 250000,
                manager: '',
                notes: 'Fondateur et PDG de Marlowe Vineyard'
            },
            'manager': {
                fullname: 'Alexandre Dubois',
                phone: '+1 (555) 002-0123',
                grade: 'manager',
                description: 'Gestionnaire op√©rationnel',
                password: 'VINE123',
                status: 'offline',
                lastLogin: 'Il y a 2h',
                permissions: ['dashboard', 'inventory', 'documents', 'reports'],
                address: '456 Oak Street, Los Santos, CA 90211',
                hireDate: '2021-03-10',
                department: 'administration',
                salary: 85000,
                manager: 'admin',
                notes: 'MBA en gestion, sp√©cialis√© en op√©rations viticoles'
            },
            'marlowe': {
                fullname: 'Elena Marlowe',
                phone: '+1 (555) 003-0456',
                grade: 'cfo',
                description: 'Responsable production',
                password: 'GRAPE456',
                status: 'online',
                lastLogin: 'Il y a 15min',
                permissions: ['dashboard', 'inventory', 'documents', 'reports'],
                address: '1247 Vinewood Hills Drive, Los Santos, CA 90210',
                hireDate: '2020-02-01',
                department: 'production',
                salary: 120000,
                manager: 'admin',
                notes: 'Ma√Ætre de chai certifi√©e, 15 ans d\'exp√©rience'
            },
            'vincent': {
                fullname: 'Vincent Leclerc',
                phone: '+1 (555) 004-0789',
                grade: 'manager',
                description: 'Responsable ventes',
                password: 'WINE789',
                status: 'offline',
                lastLogin: 'Hier 18h30',
                permissions: ['dashboard', 'documents', 'reports'],
                address: '789 Sunset Boulevard, Los Santos, CA 90212',
                hireDate: '2021-09-15',
                department: 'ventes',
                salary: 90000,
                manager: 'admin',
                notes: 'Sommelier dipl√¥m√©, expert en marketing viticole'
            },
            'sophie': {
                fullname: 'Sophie Martin',
                phone: '+1 (555) 005-0234',
                grade: 'employe',
                description: 'Assistante administrative',
                password: 'CELLAR321',
                status: 'online',
                lastLogin: 'Il y a 5min',
                permissions: ['dashboard'],
                address: '321 Pine Avenue, Los Santos, CA 90213',
                hireDate: '2022-05-20',
                department: 'administration',
                salary: 45000,
                manager: 'manager',
                notes: 'Dipl√¥m√©e en administration des affaires'
            },
            'lucas': {
                fullname: 'Lucas Bernard',
                phone: '+1 (555) 006-0567',
                grade: 'employe',
                description: 'Technicien cave',
                password: 'TECH2025',
                status: 'offline',
                lastLogin: 'Il y a 3 jours',
                permissions: ['dashboard', 'inventory'],
                address: '654 Valley Road, Los Santos, CA 90214',
                hireDate: '2023-01-10',
                department: 'technique',
                salary: 55000,
                manager: 'marlowe',
                notes: 'BTS viticulture-≈ìnologie, sp√©cialis√© en fermentation'
            }
        };
                permissions: ['dashboard', 'inventory', 'documents']
            },
            'marlowe': {
                email: 'marlowe@marlowevineyard.com',
                grade: 'cfo',
                description: 'Responsable production',
                password: 'GRAPE456',
                status: 'online',
                lastLogin: 'Il y a 15min',
                permissions: ['dashboard', 'inventory', 'documents']
            },
            'vincent': {
                email: 'vincent@marlowevineyard.com',
                grade: 'manager',
                description: 'Responsable ventes',
                password: 'WINE789',
                status: 'offline',
                lastLogin: 'Hier 18h30',
                permissions: ['dashboard', 'documents']
            },
            'sophie': {
                email: 'sophie@marlowevineyard.com',
                grade: 'employe',
                description: 'Assistante administrative',
                password: 'CELLAR321',
                status: 'online',
                lastLogin: 'Il y a 5min',
                permissions: ['dashboard']
            },
            'lucas': {
                email: 'lucas@marlowevineyard.com',
                grade: 'employe',
                description: 'Technicien cave',
                password: 'TECH2025',
                status: 'offline',
                lastLogin: 'Il y a 3 jours',
                permissions: ['dashboard', 'inventory']
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadConfiguration();
            setupUserManagement();
            setupThresholds();
            setupNotifications();
            setupSystem();
            setupLogout();

            console.log('Page Configuration avec gestion utilisateurs charg√©e !');
        });

        // === GESTION DES UTILISATEURS ===
        function setupUserManagement() {
            const addUserBtn = document.getElementById('addUserBtn');
            const userModal = document.getElementById('userModal');
            const closeModal = document.getElementById('closeUserModal');
            const cancelBtn = document.getElementById('cancelUser');
            const userForm = document.getElementById('userForm');
            const searchInput = document.getElementById('searchUsers');

            // Recherche d'utilisateurs
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                const rows = document.querySelectorAll('#usersTableBody tr');
                
                rows.forEach(row => {
                    const username = row.querySelector('strong').textContent.toLowerCase();
                    const fullname = row.cells[1].textContent.toLowerCase();
                    const phone = row.cells[2].textContent.toLowerCase();
                    const description = row.querySelector('div').textContent.toLowerCase();
                    
                    if (username.includes(query) || fullname.includes(query) || phone.includes(query) || description.includes(query)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });

            // Ajouter utilisateur
            addUserBtn.addEventListener('click', function() {
                document.getElementById('userModalTitle').textContent = 'Ajouter Utilisateur';
                document.getElementById('saveUser').innerHTML = '<i class="fas fa-plus"></i> Ajouter';
                userForm.reset();
                // Cocher dashboard par d√©faut
                document.getElementById('perm-dashboard').checked = true;
                userModal.style.display = 'flex';
            });

            // Fermer modal
            closeModal.addEventListener('click', () => userModal.style.display = 'none');
            cancelBtn.addEventListener('click', () => userModal.style.display = 'none');

            // Soumettre formulaire utilisateur
            userForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('user-username').value;
                const fullname = document.getElementById('user-fullname').value;
                const phone = document.getElementById('user-phone').value;
                const grade = document.getElementById('user-grade').value;
                const password = document.getElementById('user-password').value;
                const passwordConfirm = document.getElementById('user-password-confirm').value;
                const description = document.getElementById('user-description').value;

                // Validation
                if (!username || !fullname || !phone || !grade || !description) {
                    notify.error('Erreur', 'Veuillez remplir tous les champs obligatoires.');
                    return;
                }

                // V√©rifier les mots de passe
                if (password && password !== passwordConfirm) {
                    notify.error('Erreur', 'Les mots de passe ne correspondent pas.');
                    return;
                }

                // V√©rifier si l'utilisateur existe d√©j√†
                if (usersDatabase[username] && document.getElementById('userModalTitle').textContent === 'Ajouter Utilisateur') {
                    notify.error('Erreur', 'Cet utilisateur existe d√©j√†.');
                    return;
                }

                // Collecter les permissions
                const permissions = [];
                if (document.getElementById('perm-dashboard').checked) permissions.push('dashboard');
                if (document.getElementById('perm-inventory').checked) permissions.push('inventory');
                if (document.getElementById('perm-documents').checked) permissions.push('documents');
                if (document.getElementById('perm-config').checked) permissions.push('config');
                if (document.getElementById('perm-reports').checked) permissions.push('reports');
                if (document.getElementById('perm-users').checked) permissions.push('users');

                // Sauvegarder l'utilisateur
                usersDatabase[username] = {
                    fullname: fullname,
                    phone: phone,
                    grade: grade,
                    description: description,
                    password: password || usersDatabase[username]?.password || 'TEMP123',
                    status: 'offline',
                    lastLogin: 'Jamais',
                    permissions: permissions,
                    address: document.getElementById('user-address').value || '',
                    hireDate: document.getElementById('user-hire-date').value || '',
                    department: document.getElementById('user-department').value || '',
                    salary: parseInt(document.getElementById('user-salary').value) || 0,
                    manager: document.getElementById('user-manager').value || '',
                    notes: document.getElementById('user-notes').value || ''
                };

                updateUsersTable();
                userModal.style.display = 'none';
                
                const action = document.getElementById('userModalTitle').textContent;
                notify.success('Succ√®s', `Utilisateur ${action === 'Ajouter Utilisateur' ? 'ajout√©' : 'modifi√©'} avec succ√®s !`);
            });

            // Export utilisateurs
            document.getElementById('exportUsers').addEventListener('click', function() {
                const users = Object.entries(usersDatabase).map(([username, data]) => ({
                    username,
                    fullname: data.fullname,
                    phone: data.phone,
                    grade: data.grade,
                    description: data.description,
                    status: data.status,
                    lastLogin: data.lastLogin,
                    department: data.department,
                    salary: data.salary
                }));

                const csvContent = "data:text/csv;charset=utf-8," 
                    + "Nom d'utilisateur,Nom complet,T√©l√©phone,Grade,Description,Statut,Derni√®re connexion,D√©partement,Salaire\n"
                    + users.map(user => `${user.username},"${user.fullname}",${user.phone},${user.grade},"${user.description}",${user.status},"${user.lastLogin}",${user.department},${user.salary}`).join('\n');

                const encodedUri = encodeURI(csvContent);
                const link = document.createElement('a');
                link.setAttribute('href', encodedUri);
                link.setAttribute('download', 'marlowe_users_export.csv');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                notify.success('Export r√©ussi', 'Liste des utilisateurs export√©e en CSV.');
            });

            // R√©initialiser mots de passe
            document.getElementById('resetPasswords').addEventListener('click', function() {
                const confirmNotification = notify.warning(
                    'Confirmation dangereuse', 
                    'R√©initialiser TOUS les mots de passe ? Cette action est irr√©versible.', 
                    15000
                );
                
                const notificationContent = confirmNotification.querySelector('.notification-content');
                const buttonsDiv = document.createElement('div');
                buttonsDiv.style.marginTop = '1rem';
                buttonsDiv.style.display = 'flex';
                buttonsDiv.style.gap = '0.5rem';
                
                const confirmBtn = document.createElement('button');
                confirmBtn.className = 'cta-button btn-warning';
                confirmBtn.style.fontSize = '0.8rem';
                confirmBtn.style.padding = '0.5rem 1rem';
                confirmBtn.textContent = 'R√âINITIALISER';
                
                const cancelBtn = document.createElement('button');
                cancelBtn.className = 'cta-button btn-secondary';
                cancelBtn.style.fontSize = '0.8rem';
                cancelBtn.style.padding = '0.5rem 1rem';
                cancelBtn.textContent = 'Annuler';
                
                buttonsDiv.appendChild(cancelBtn);
                buttonsDiv.appendChild(confirmBtn);
                notificationContent.appendChild(buttonsDiv);
                
                confirmBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                    
                    // R√©initialiser tous les mots de passe sauf admin
                    Object.keys(usersDatabase).forEach(username => {
                        if (username !== 'admin') {
                            usersDatabase[username].password = 'RESET2025';
                        }
                    });
                    
                    notify.info('Mots de passe r√©initialis√©s', 'Nouveau mot de passe temporaire: RESET2025');
                });
                
                cancelBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                });
            });
        }

            // R√©initialiser mots de passe
            document.getElementById('resetPasswords').addEventListener('click', function() {
                const confirmNotification = notify.warning(
                    'Confirmation dangereuse', 
                    'R√©initialiser TOUS les mots de passe ? Cette action est irr√©versible.', 
                    15000
                );
                
                const notificationContent = confirmNotification.querySelector('.notification-content');
                const buttonsDiv = document.createElement('div');
                buttonsDiv.style.marginTop = '1rem';
                buttonsDiv.style.display = 'flex';
                buttonsDiv.style.gap = '0.5rem';
                
                const confirmBtn = document.createElement('button');
                confirmBtn.className = 'cta-button btn-warning';
                confirmBtn.style.fontSize = '0.8rem';
                confirmBtn.style.padding = '0.5rem 1rem';
                confirmBtn.textContent = 'R√âINITIALISER';
                
                const cancelBtn = document.createElement('button');
                cancelBtn.className = 'cta-button btn-secondary';
                cancelBtn.style.fontSize = '0.8rem';
                cancelBtn.style.padding = '0.5rem 1rem';
                cancelBtn.textContent = 'Annuler';
                
                buttonsDiv.appendChild(cancelBtn);
                buttonsDiv.appendChild(confirmBtn);
                notificationContent.appendChild(buttonsDiv);
                
                confirmBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                    
                    // R√©initialiser tous les mots de passe sauf admin
                    Object.keys(usersDatabase).forEach(username => {
                        if (username !== 'admin') {
                            usersDatabase[username].password = 'RESET2025';
                        }
                    });
                    
                    notify.info('Mots de passe r√©initialis√©s', 'Nouveau mot de passe temporaire: RESET2025');
                });
                
                cancelBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                });
            });
        }

        // Fonctions globales pour les actions utilisateurs
        window.editUser = function(username) {
            const user = usersDatabase[username];
            if (!user) return;

            document.getElementById('userModalTitle').textContent = 'Modifier Utilisateur';
            document.getElementById('saveUser').innerHTML = '<i class="fas fa-save"></i> Sauvegarder';
            
            document.getElementById('user-username').value = username;
            document.getElementById('user-fullname').value = user.fullname;
            document.getElementById('user-phone').value = user.phone;
            document.getElementById('user-grade').value = user.grade;
            document.getElementById('user-description').value = user.description;
            document.getElementById('user-password').value = '';
            document.getElementById('user-password-confirm').value = '';
            document.getElementById('user-address').value = user.address || '';
            document.getElementById('user-hire-date').value = user.hireDate || '';
            document.getElementById('user-department').value = user.department || '';
            document.getElementById('user-salary').value = user.salary || '';
            document.getElementById('user-manager').value = user.manager || '';
            document.getElementById('user-notes').value = user.notes || '';

            // Permissions
            document.getElementById('perm-dashboard').checked = user.permissions.includes('dashboard');
            document.getElementById('perm-inventory').checked = user.permissions.includes('inventory');
            document.getElementById('perm-documents').checked = user.permissions.includes('documents');
            document.getElementById('perm-config').checked = user.permissions.includes('config');
            document.getElementById('perm-reports').checked = user.permissions.includes('reports');
            document.getElementById('perm-users').checked = user.permissions.includes('users');

            document.getElementById('userModal').style.display = 'flex';
        };

        window.deleteUser = function(username) {
            if (username === 'admin') {
                notify.error('Action interdite', 'Impossible de supprimer le compte administrateur.');
                return;
            }

            const confirmNotification = notify.warning(
                `Supprimer ${username}`, 
                'Cette action est irr√©versible. Confirmer la suppression ?', 
                10000
            );
            
            const notificationContent = confirmNotification.querySelector('.notification-content');
            const buttonsDiv = document.createElement('div');
            buttonsDiv.style.marginTop = '1rem';
            buttonsDiv.style.display = 'flex';
            buttonsDiv.style.gap = '0.5rem';
            
            const confirmBtn = document.createElement('button');
            confirmBtn.className = 'cta-button btn-warning';
            confirmBtn.style.fontSize = '0.8rem';
            confirmBtn.style.padding = '0.5rem 1rem';
            confirmBtn.textContent = 'Supprimer';
            
            const cancelBtn = document.createElement('button');
            cancelBtn.className = 'cta-button btn-secondary';
            cancelBtn.style.fontSize = '0.8rem';
            cancelBtn.style.padding = '0.5rem 1rem';
            cancelBtn.textContent = 'Annuler';
            
            buttonsDiv.appendChild(cancelBtn);
            buttonsDiv.appendChild(confirmBtn);
            notificationContent.appendChild(buttonsDiv);
            
            confirmBtn.addEventListener('click', () => {
                notify.remove(confirmNotification);
                delete usersDatabase[username];
                updateUsersTable();
                notify.success('Utilisateur supprim√©', `${username} a √©t√© supprim√© de la base.`);
            });
            
            cancelBtn.addEventListener('click', () => {
                notify.remove(confirmNotification);
            });
        };

        function updateUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';

            Object.entries(usersDatabase).forEach(([username, user]) => {
                const gradeClass = `grade-${user.grade}`;
                const statusIcon = user.status === 'online' ? 'status-online' : 'status-offline';
                const statusText = user.status === 'online' ? 'En ligne' : 'Hors ligne';
                const canDelete = username !== 'admin';

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <strong>${username}</strong>
                        <div style="font-size: 0.8rem; color: #6c757d;">${user.description}</div>
                    </td>
                    <td>${user.fullname}</td>
                    <td>${user.phone}</td>
                    <td><span class="grade-badge ${gradeClass}">${user.grade.toUpperCase()}</span></td>
                    <td>
                        <div class="user-status">
                            <i class="fas fa-circle ${statusIcon}"></i>
                            <span>${statusText}</span>
                        </div>
                    </td>
                    <td class="last-login">${user.lastLogin}</td>
                    <td>
                        <div class="user-actions">
                            <button class="btn-small btn-edit" onclick="editUser('${username}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            ${canDelete ? `<button class="btn-small btn-delete" onclick="deleteUser('${username}')">
                                <i class="fas fa-trash"></i>
                            </button>` : ''}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // === GESTION DES SEUILS (existant) ===
        function setupThresholds() {
            document.getElementById('saveThresholds').addEventListener('click', function() {
                const criticalMatieres = parseInt(document.getElementById('critical-matieres').value);
                const warningMatieres = parseInt(document.getElementById('warning-matieres').value);
                const criticalBouteilles = parseInt(document.getElementById('critical-bouteilles').value);
                const warningBouteilles = parseInt(document.getElementById('warning-bouteilles').value);

                if (criticalMatieres >= warningMatieres || criticalBouteilles >= warningBouteilles) {
                    notify.error('Erreur', 'Le seuil critique doit √™tre inf√©rieur au seuil de stock faible.');
                    return;
                }

                configData.thresholds.matieres.critical = criticalMatieres;
                configData.thresholds.matieres.warning = warningMatieres;
                configData.thresholds.bouteilles.critical = criticalBouteilles;
                configData.thresholds.bouteilles.warning = warningBouteilles;

                window.updateGlobalConfig(configData);
                updateThresholdInfo();
                notify.success('Configuration sauvegard√©e', 'Nouveaux seuils appliqu√©s.');
            });

            document.getElementById('resetThresholds').addEventListener('click', function() {
                const confirmNotification = notify.warning(
                    'R√©initialiser les seuils', 
                    'Remettre les valeurs par d√©faut ?', 
                    10000
                );
                
                const notificationContent = confirmNotification.querySelector('.notification-content');
                const buttonsDiv = document.createElement('div');
                buttonsDiv.style.marginTop = '1rem';
                buttonsDiv.style.display = 'flex';
                buttonsDiv.style.gap = '0.5rem';
                
                const confirmBtn = document.createElement('button');
                confirmBtn.className = 'cta-button btn-warning';
                confirmBtn.style.fontSize = '0.8rem';
                confirmBtn.style.padding = '0.5rem 1rem';
                confirmBtn.textContent = 'R√©initialiser';
                
                const cancelBtn = document.createElement('button');
                cancelBtn.className = 'cta-button btn-secondary';
                cancelBtn.style.fontSize = '0.8rem';
                cancelBtn.style.padding = '0.5rem 1rem';
                cancelBtn.textContent = 'Annuler';
                
                buttonsDiv.appendChild(cancelBtn);
                buttonsDiv.appendChild(confirmBtn);
                notificationContent.appendChild(buttonsDiv);
                
                confirmBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                    
                    configData.thresholds.matieres.critical = 50;
                    configData.thresholds.matieres.warning = 100;
                    configData.thresholds.bouteilles.critical = 30;
                    configData.thresholds.bouteilles.warning = 75;
                    
                    window.updateGlobalConfig(configData);
                    loadConfiguration();
                    notify.info('Seuils r√©initialis√©s', 'Valeurs par d√©faut restaur√©es.');
                });
                
                cancelBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                });
            });

            document.getElementById('warning-matieres').addEventListener('input', updateThresholdInfo);
            document.getElementById('warning-bouteilles').addEventListener('input', updateThresholdInfo);
        }

        // === GESTION DES NOTIFICATIONS (existant) ===
        function setupNotifications() {
            document.getElementById('saveNotifications').addEventListener('click', function() {
                const duration = parseInt(document.getElementById('notification-duration').value);
                const soundEnabled = document.getElementById('sound-notifications').checked;

                configData.notifications.duration = duration;
                configData.notifications.soundEnabled = soundEnabled;
                window.updateGlobalConfig(configData);
                notify.success('Configuration sauvegard√©e', 'Param√®tres de notification mis √† jour.');
            });

            document.getElementById('resetNotifications').addEventListener('click', function() {
                configData.notifications.duration = 4;
                configData.notifications.soundEnabled = true;
                window.updateGlobalConfig(configData);
                loadConfiguration();
                notify.info('Notifications r√©initialis√©es', 'Param√®tres par d√©faut restaur√©s.');
            });
        }

        // === GESTION DU SYST√àME (existant) ===
        function setupSystem() {
            document.getElementById('saveSystem').addEventListener('click', function() {
                const sessionTimeout = parseInt(document.getElementById('session-timeout').value);
                const theme = document.getElementById('theme-mode').value;

                configData.system.sessionTimeout = sessionTimeout;
                configData.system.theme = theme;
                window.updateGlobalConfig(configData);
                notify.success('Configuration sauvegard√©e', 'Param√®tres syst√®me mis √† jour.');
            });

            document.getElementById('resetSystem').addEventListener('click', function() {
                configData.system.sessionTimeout = 60;
                configData.system.theme = 'light';
                window.updateGlobalConfig(configData);
                loadConfiguration();
                notify.info('Syst√®me r√©initialis√©', 'Param√®tres par d√©faut restaur√©s.');
            });
        }

        // === D√âCONNEXION ===
        function setupLogout() {
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                
                const confirmNotification = notify.info(
                    'Confirmation de d√©connexion', 
                    '√ätes-vous s√ªr de vouloir vous d√©connecter ?', 
                    10000
                );
                
                const notificationContent = confirmNotification.querySelector('.notification-content');
                const buttonsDiv = document.createElement('div');
                buttonsDiv.style.marginTop = '1rem';
                buttonsDiv.style.display = 'flex';
                buttonsDiv.style.gap = '0.5rem';
                
                const confirmBtn = document.createElement('button');
                confirmBtn.className = 'cta-button btn-warning';
                confirmBtn.style.fontSize = '0.8rem';
                confirmBtn.style.padding = '0.5rem 1rem';
                confirmBtn.textContent = 'D√©connexion';
                
                const cancelBtn = document.createElement('button');
                cancelBtn.className = 'cta-button btn-secondary';
                cancelBtn.style.fontSize = '0.8rem';
                cancelBtn.style.padding = '0.5rem 1rem';
                cancelBtn.textContent = 'Annuler';
                
                buttonsDiv.appendChild(cancelBtn);
                buttonsDiv.appendChild(confirmBtn);
                notificationContent.appendChild(buttonsDiv);
                
                confirmBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                    notify.info('D√©connexion en cours', 'Redirection vers l\'accueil...');
                    setTimeout(() => {
                        window.location.href = '../index.html';
                    }, 1000);
                });
                
                cancelBtn.addEventListener('click', () => {
                    notify.remove(confirmNotification);
                });
            });
        }

        // === FONCTIONS UTILITAIRES ===
        function loadConfiguration() {
            // Charger les seuils
            document.getElementById('critical-matieres').value = configData.thresholds.matieres.critical;
            document.getElementById('warning-matieres').value = configData.thresholds.matieres.warning;
            document.getElementById('critical-bouteilles').value = configData.thresholds.bouteilles.critical;
            document.getElementById('warning-bouteilles').value = configData.thresholds.bouteilles.warning;

            // Charger les notifications
            document.getElementById('notification-duration').value = configData.notifications.duration;
            document.getElementById('sound-notifications').checked = configData.notifications.soundEnabled;

            // Charger le syst√®me
            document.getElementById('session-timeout').value = configData.system.sessionTimeout;
            document.getElementById('theme-mode').value = configData.system.theme;

            updateThresholdInfo();
        }

        function updateThresholdInfo() {
            const warningMatieres = document.getElementById('warning-matieres').value;
            const warningBouteilles = document.getElementById('warning-bouteilles').value;

            const matieresInfo = document.querySelector('.config-item:nth-child(1) .threshold-info span');
            const bouteillesInfo = document.querySelector('.config-item:nth-child(2) .threshold-info span');

            if (matieresInfo) {
                matieresInfo.innerHTML = `Au-dessus de ${warningMatieres} unit√©s = <strong>Bon Stock</strong>`;
            }
            if (bouteillesInfo) {
                bouteillesInfo.innerHTML = `Au-dessus de ${warningBouteilles} bouteilles = <strong>Bon Stock</strong>`;
            }
        }
    </script>
</body>
</html>
